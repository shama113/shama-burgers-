<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Shama Burgers ‚Äî –®—ã–º–∫–µ–Ω—Ç</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="site-header">
    <div class="brand">
      <svg class="burger-logo rotating" viewBox="0 0 64 64" aria-hidden="true">
        <circle cx="32" cy="32" r="30" fill="url(#grad)" />
        <g filter="url(#glow)">
          <rect x="12" y="22" width="40" height="6" rx="3" fill="#ffb347"/>
          <rect x="12" y="30" width="40" height="6" rx="3" fill="#8b4513"/>
          <rect x="12" y="38" width="40" height="6" rx="3" fill="#ffb347"/>
        </g>
        <defs>
          <radialGradient id="grad" cx="50%" cy="50%" r="50%">
            <stop offset="0%" stop-color="#ff7b47"/>
            <stop offset="100%" stop-color="#ff6b35"/>
          </radialGradient>
          <filter id="glow">
            <feGaussianBlur stdDeviation="1.5" result="coloredBlur"/>
            <feMerge>
              <feMergeNode in="coloredBlur"/>
              <feMergeNode in="SourceGraphic"/>
            </feMerge>
          </filter>
        </defs>
      </svg>
      <div>
        <h1>Shama Burgers</h1>
        <p class="sub">–≥. –®—ã–º–∫–µ–Ω—Ç ‚Ä¢ 87025073828</p>
      </div>
    </div>

    <button class="hamburger" aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é" title="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é">
      <span></span><span></span><span></span>
    </button>

    <nav class="top-nav">
      <a href="#menu">üçî –ú–µ–Ω—é</a>
      <a href="#promo">üéÅ –ê–∫—Ü–∏–∏</a>
      <a href="#reviews">üí¨ –û—Ç–∑—ã–≤—ã</a>
      <a href="#about">üè† –û –Ω–∞—Å</a>
      <a href="#contact" class="cta">üìç –ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
    </nav>
  </header>

  <!-- Fullscreen menu (hidden by default) -->
  <div id="fullscreenMenu" class="fullscreen-menu" aria-hidden="true">
    <button id="closeMenu" class="close-menu" aria-label="–ó–∞–∫—Ä—ã—Ç—å –º–µ–Ω—é">‚úï</button>
    <ul class="fullscreen-list">
      <li><a href="#menu" class="fs-link">üçî –ú–µ–Ω—é</a></li>
      <li><a href="#promo" class="fs-link">üéÅ –ê–∫—Ü–∏–∏</a></li>
      <li><a href="#reviews" class="fs-link">üí¨ –û—Ç–∑—ã–≤—ã</a></li>
      <li><a href="#about" class="fs-link">üè† –û –Ω–∞—Å</a></li>
      <li><a href="#contact" class="fs-link">üìç –ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
    </ul>
  </div>

  <section class="hero fade-in">
    <div class="hero-left">
      <h2>üî• –°–∞–º—ã–µ —Å–æ—á–Ω—ã–µ –±—É—Ä–≥–µ—Ä—ã –≤ –®—ã–º–∫–µ–Ω—Ç–µ!</h2>
      <p>–ü–æ–ø—Ä–æ–±—É–π –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π Shama Burger ‚Äî –≤–∫—É—Å, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø–æ–º–Ω–∏—Ç—Å—è –Ω–∞–≤—Å–µ–≥–¥–∞!</p>
      <a href="#menu" class="btn">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –º–µ–Ω—é</a>
      <a href="#promo" class="btn ghost">–°–º–æ—Ç—Ä–µ—Ç—å –∞–∫—Ü–∏–∏</a>
    </div>
    <div class="hero-right">
      <div class="burger-3d" aria-hidden="true"></div>
    </div>
  </section>

  <section id="menu" class="menu-section fade-up">
    <h3 class="section-title">üçî –ù–∞—à–µ –º–µ–Ω—é</h3>
    <div class="menu-grid">
      <div class="menu-item">
        <div class="sticker animate">üçî</div>
        <h4>Shama Classic</h4>
        <p>–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –±—É—Ä–≥–µ—Ä —Å –≥–æ–≤—è–¥–∏–Ω–æ–π –∏ —Ñ–∏—Ä–º–µ–Ω–Ω—ã–º —Å–æ—É—Å–æ–º</p>
        <p class="meta">2500 ‚Ç∏</p>
        <button class="add">–î–æ–±–∞–≤–∏—Ç—å</button>
      </div>
      <div class="menu-item">
        <div class="sticker animate">üî•</div>
        <h4>Hot Burger</h4>
        <p>–û—Å—Ç—Ä—ã–π –±—É—Ä–≥–µ—Ä —Å –ø–µ—Ä—Ü–µ–º —á–∏–ª–∏ –∏ —Ö—Ä—É—Å—Ç—è—â–µ–π –±—É–ª–æ—á–∫–æ–π</p>
        <p class="meta">2800 ‚Ç∏</p>
        <button class="add">–î–æ–±–∞–≤–∏—Ç—å</button>
      </div>
      <div class="menu-item">
        <div class="sticker animate">üßÄ</div>
        <h4>Cheese Burger</h4>
        <p>–î–≤–æ–π–Ω–∞—è –ø–æ—Ä—Ü–∏—è —Å—ã—Ä–∞ –∏ —Å–æ—á–Ω–∞—è –∫–æ—Ç–ª–µ—Ç–∞</p>
        <p class="meta">2700 ‚Ç∏</p>
        <button class="add">–î–æ–±–∞–≤–∏—Ç—å</button>
      </div>
    </div>
  </section>

  <section id="slider" class="slider-section fade-up">
    <h3 class="section-title">–°–ª–∞–π–¥–µ—Ä ‚Äî –ø—Ä–∏–º–µ—Ä (–æ–¥–∏–Ω —Å–ª–∞–π–¥)</h3>
    <div class="simple-slider">
      <div class="slides">
        <div class="slide active">
          <h4>–ö–æ–º–±–æ ¬´–î—Ä—É–∑—å—è¬ª</h4>
          <p>3 –±—É—Ä–≥–µ—Ä–∞ + 3 –Ω–∞–ø–∏—Ç–∫–∞ = 15% —Å–∫–∏–¥–∫–∞!</p>
        </div>
        <!-- –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å .slide -->
      </div>
      <div class="slider-controls">
        <button id="prevSlide" class="small">‚óÄ</button>
        <button id="nextSlide" class="small">‚ñ∂</button>
      </div>
    </div>
  </section>

  <section id="promo" class="promo-section fade-up">
    <h3 class="section-title">üéâ –ê–∫—Ü–∏–∏ –∏ —Å–∫–∏–¥–∫–∏</h3>
    <div class="promo-grid">
      <div class="promo-card glow">
        <h4>üî• –ö–æ–º–±–æ "–î—Ä—É–∑—å—è"</h4>
        <p>3 –±—É—Ä–≥–µ—Ä–∞ + 3 –Ω–∞–ø–∏—Ç–∫–∞ = 15% —Å–∫–∏–¥–∫–∞!</p>
      </div>
      <div class="promo-card glow">
        <h4>üçü –ë–æ–Ω—É—Å –∫ –∑–∞–∫–∞–∑—É</h4>
        <p>–ö–∞—Ä—Ç–æ—à–∫–∞ —Ñ—Ä–∏ –≤ –ø–æ–¥–∞—Ä–æ–∫ –ø—Ä–∏ –∑–∞–∫–∞–∑–µ –æ—Ç 4000 ‚Ç∏</p>
      </div>
      <div class="promo-card glow">
        <h4>üí• –ù–æ–≤–∏–Ω–∫–∞ –Ω–µ–¥–µ–ª–∏</h4>
        <p>BBQ Burger ‚Äî —Ç–æ–ª—å–∫–æ 2600 ‚Ç∏</p>
      </div>
    </div>
  </section>

  <section id="faq" class="faq-section fade-up">
    <h3 class="section-title">‚ùì –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã</h3>
    <div class="accordion">
      <div class="acc-item">
        <button class="acc-head">–î–æ—Å—Ç–∞–≤–∫–∞ –µ—Å—Ç—å? <span class="triangle" aria-hidden="true">‚ñæ</span></button>
        <div class="acc-body">
          <div class="acc-body-inner">
            –î–∞ ‚Äî –¥–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –≥–æ—Ä–æ–¥—É. –°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —É–¥–∞–ª—ë–Ω–Ω–æ—Å—Ç–∏.
          </div>
        </div>
      </div>

      <div class="acc-item">
        <button class="acc-head">–ú–æ–∂–Ω–æ –ª–∏ –∑–∞–∫–∞–∑–∞—Ç—å –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É? <span class="triangle" aria-hidden="true">‚ñæ</span></button>
        <div class="acc-body">
          <div class="acc-body-inner">
            –ö–æ–Ω–µ—á–Ω–æ. –ó–≤–æ–Ω–∏—Ç–µ –Ω–∞ –Ω–∞—à –Ω–æ–º–µ—Ä –∏–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ –∑–∞—è–≤–∫—É –Ω–∞ —Å–∞–π—Ç–µ.
          </div>
        </div>
      </div>

      <div class="acc-item">
        <button class="acc-head">–ï—Å—Ç—å –ª–∏ –≤–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω—Å–∫–∏–µ –ø–æ–∑–∏—Ü–∏–∏? <span class="triangle" aria-hidden="true">‚ñæ</span></button>
        <div class="acc-body">
          <div class="acc-body-inner">
            –î–∞ ‚Äî —É –Ω–∞—Å –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω—Å–∫–∏—Ö –±—É—Ä–≥–µ—Ä–æ–≤ –∏ –≥–∞—Ä–Ω–∏—Ä–æ–≤.
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="reviews" class="reviews fade-up">
    <h3 class="section-title">üí¨ –û—Ç–∑—ã–≤—ã ‚Äî —Å–ª–∞–π–¥—à–æ—É —Å –∞–≤–∞—Ç–∞—Ä–∞–º–∏</h3>

    <div class="showcase">
      <div class="content-list">
        <div class="content-item active" data-index="0">
          <blockquote class="review">‚Äú–õ—É—á—à–∏–µ –±—É—Ä–≥–µ—Ä—ã –≤ –≥–æ—Ä–æ–¥–µ! –°–æ—É—Å –ø—Ä–æ—Å—Ç–æ –æ–≥–æ–Ω—å!‚Äù<cite> ‚Äî –ê–ª–∏—Ö–∞–Ω</cite></blockquote>
        </div>
        <div class="content-item" data-index="1">
          <blockquote class="review">‚Äú–û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –±—ã—Å—Ç—Ä–æ–µ, –∏–Ω—Ç–µ—Ä—å–µ—Ä —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π, –≤—Å—ë —Å—É–ø–µ—Ä.‚Äù<cite> ‚Äî –ê—Ä—É–∂–∞–Ω</cite></blockquote>
        </div>
        <div class="content-item" data-index="2">
          <blockquote class="review">‚Äú–ë—É–ª–æ—á–∫–∞ –º—è–≥–∫–∞—è, –±—É—Ä–≥–µ—Ä —Å–æ—á–Ω—ã–π. –°–æ–≤–µ—Ç—É—é –≤—Å–µ–º!‚Äù<cite> ‚Äî –¢–∏–º—É—Ä</cite></blockquote>
        </div>
      </div>

      <div class="avatar-list">
        <button class="avatar active" data-target="0" aria-label="–ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–∑—ã–≤ –ê–ª–∏—Ö–∞–Ω">–ê</button>
        <button class="avatar" data-target="1" aria-label="–ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–∑—ã–≤ –ê—Ä—É–∂–∞–Ω">–ê</button>
        <button class="avatar" data-target="2" aria-label="–ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–∑—ã–≤ –¢–∏–º—É—Ä">–¢</button>
      </div>
    </div>
  </section>

  <section id="about" class="about fade-up">
    <h3 class="section-title">üè† –û –Ω–∞—Å</h3>
    <p>Shama Burgers ‚Äî —ç—Ç–æ –º–µ—Å—Ç–æ, –≥–¥–µ –≤–∫—É—Å, –∫–∞—á–µ—Å—Ç–≤–æ –∏ –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞ —Å–æ–∑–¥–∞—é—Ç –∏–¥–µ–∞–ª—å–Ω–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ. –ú—ã –≥–æ—Ç–æ–≤–∏–º —Ç–æ–ª—å–∫–æ –∏–∑ —Å–≤–µ–∂–∏—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏ –ª—é–±–∏–º –∫–∞–∂–¥–æ–≥–æ –≥–æ—Å—Ç—è!</p>
  </section>

  <section id="contact" class="contact fade-up">
    <h3 class="section-title">üìç –ö–∞–∫ –Ω–∞—Å –Ω–∞–π—Ç–∏ / –ó–∞–∫–∞–∑–∞—Ç—å</h3>
    <p><b>–ê–¥—Ä–µ—Å:</b> –≥. –®—ã–º–∫–µ–Ω—Ç, –ø—Ä. –¢–∞—É–∫–µ —Ö–∞–Ω–∞, 45</p>
    <div class="map-container">
      <iframe src="https://www.google.com/maps?q=Shymkent,+Tauke+Khan+45&output=embed" title="–ö–∞—Ä—Ç–∞"></iframe>
    </div>

    <div class="order-form">
      <h4>–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</h4>
      <form id="orderForm" novalidate>
        <div class="row">
          <label>–ò–º—è <input type="text" name="name" id="name" required></label>
          <label>–¢–µ–ª–µ—Ñ–æ–Ω <input type="tel" name="phone" id="phone" required></label>
        </div>
        <label>Email <input type="email" name="to" id="email" required placeholder="you@example.com"></label>
        <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π <textarea name="comment" id="comment" rows="3"></textarea></label>

        <div class="form-actions">
          <button type="submit" class="btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑</button>
          <button type="reset" class="btn ghost">–°–±—Ä–æ—Å</button>
        </div>
      </form>
    </div>
  </section>

  <footer class="site-footer">
    <p>¬© 2025 Shama Burgers ‚Ä¢ –≥. –®—ã–º–∫–µ–Ω—Ç</p>
    <div class="socials">
      <a href="#"><img src="https://cdn-icons-png.flaticon.com/512/733/733547.png" alt="Instagram"></a>
      <a href="#"><img src="https://cdn-icons-png.flaticon.com/512/2111/2111463.png" alt="WhatsApp"></a>
      <a href="#"><img src="https://cdn-icons-png.flaticon.com/512/2111/2111646.png" alt="Telegram"></a>
    </div>
    <p>–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è –ª—é–±–∏—Ç–µ–ª–µ–π –±—É—Ä–≥–µ—Ä–æ–≤</p>
  </footer>

  <!-- Sparks canvas (bottom) -->
  <canvas id="sparks"></canvas>

  <!-- Modal: success / error -->
  <div id="modalOverlay" class="modal-overlay" aria-hidden="true">
    <div class="modal">
      <button class="modal-close" aria-label="–ó–∞–∫—Ä—ã—Ç—å">‚úï</button>
      <div class="modal-body">
        <h4 id="modalTitle">–†–µ–∑—É–ª—å—Ç–∞—Ç</h4>
        <p id="modalMessage"></p>
      </div>
    </div>
  </div>

  <script>
    /* ====== IntersectionObserver for fade animations ====== */
    (function() {
      const elements = document.querySelectorAll('.fade-up, .fade-in');
      const observer = new IntersectionObserver(entries => {
        entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('visible'); });
      }, { threshold: 0.18 });
      elements.forEach(el => observer.observe(el));
    })();

    /* ====== Fullscreen menu ====== */
    (function() {
      const btn = document.querySelector('.hamburger');
      const fsMenu = document.getElementById('fullscreenMenu');
      const closeBtn = document.getElementById('closeMenu');
      const fsLinks = document.querySelectorAll('.fs-link');

      function openMenu() {
        fsMenu.classList.add('open');
        fsMenu.setAttribute('aria-hidden', 'false');
        document.body.style.overflow = 'hidden';
      }
      function closeMenuFn() {
        fsMenu.classList.remove('open');
        fsMenu.setAttribute('aria-hidden', 'true');
        document.body.style.overflow = '';
      }

      btn.addEventListener('click', openMenu);
      closeBtn.addEventListener('click', closeMenuFn);
      fsLinks.forEach(a => a.addEventListener('click', closeMenuFn));
      // Close menu on Escape
      window.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeMenuFn(); });
    })();

    /* ====== Simple slider (single slide demo) ====== */
    (function() {
      const slides = document.querySelectorAll('.simple-slider .slide');
      let cur = 0;
      function show(i) {
        slides.forEach(s => s.classList.remove('active'));
        if (slides[i]) slides[i].classList.add('active');
      }
      document.getElementById('prevSlide').addEventListener('click', () => {
        cur = (cur - 1 + slides.length) % slides.length;
        show(cur);
      });
      document.getElementById('nextSlide').addEventListener('click', () => {
        cur = (cur + 1) % slides.length;
        show(cur);
      });
      // auto-advance only if multiple slides
      if (slides.length > 1) setInterval(() => { cur = (cur + 1) % slides.length; show(cur); }, 5000);
    })();

    /* ====== Accordion (vertical) ====== */
    (function() {
      const accItems = document.querySelectorAll('.acc-item');
      accItems.forEach(item => {
        const head = item.querySelector('.acc-head');
        const body = item.querySelector('.acc-body');
        const inner = item.querySelector('.acc-body-inner');

        // start closed: ensure height 0
        body.style.height = '0px';
        body.style.overflow = 'hidden';

        head.addEventListener('click', () => {
          const isOpen = item.classList.contains('open');

          // close all siblings (optional: single-open behavior)
          accItems.forEach(i => {
            i.classList.remove('open');
            i.querySelector('.acc-body').style.height = '0px';
            i.querySelector('.triangle').textContent = '‚ñæ';
            i.querySelector('.acc-head').style.color = '';
          });

          if (!isOpen) {
            item.classList.add('open');
            const fullH = inner.offsetHeight;
            body.style.height = fullH + 'px';
            head.style.color = 'var(--accent2)';
            item.querySelector('.triangle').textContent = '‚ñ¥';
          } else {
            item.classList.remove('open');
            body.style.height = '0px';
            head.style.color = '';
            item.querySelector('.triangle').textContent = '‚ñæ';
          }
        });
      });
    })();

    /* ====== Slideshow with avatars (reviews) ====== */
    (function() {
      const avatars = document.querySelectorAll('.avatar');
      const contents = document.querySelectorAll('.content-item');

      function showIndex(i) {
        contents.forEach(c => c.classList.remove('active'));
        avatars.forEach(a => a.classList.remove('active'));
        const targetContent = document.querySelector('.content-item[data-index="'+i+'"]');
        const targetAvatar = document.querySelector('.avatar[data-target="'+i+'"]');
        if (targetContent) targetContent.classList.add('active');
        if (targetAvatar) targetAvatar.classList.add('active');
      }

      avatars.forEach(av => {
        av.addEventListener('click', () => {
          const t = av.getAttribute('data-target');
          showIndex(t);
        });
      });

      // auto-rotate every 4s
      let idx = 0;
      setInterval(() => {
        idx = (idx + 1) % contents.length;
        showIndex(idx);
      }, 4000);
    })();

    /* ====== Order form + modal (AJAX POST JSON) ====== */
    (function() {
      const form = document.getElementById('orderForm');
      const modalOverlay = document.getElementById('modalOverlay');
      const modalTitle = document.getElementById('modalTitle');
      const modalMessage = document.getElementById('modalMessage');
      const modalClose = document.querySelector('.modal-close');

      function openModal(title, msg) {
        modalTitle.textContent = title;
        modalMessage.textContent = msg;
        modalOverlay.classList.add('visible');
        modalOverlay.setAttribute('aria-hidden', 'false');
        document.body.style.overflow = 'hidden';
      }
      function closeModal() {
        modalOverlay.classList.remove('visible');
        modalOverlay.setAttribute('aria-hidden', 'true');
        document.body.style.overflow = '';
      }

      modalClose.addEventListener('click', closeModal);
      modalOverlay.addEventListener('click', (e) => { if (e.target === modalOverlay) closeModal(); });
      window.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeModal(); });

      function validateEmail(email) {
        // simple regex
        return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
      }

      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        const name = form.name.value.trim();
        const phone = form.phone.value.trim();
        const to = form.to.value.trim();
        const comment = form.comment.value.trim();

        if (!name || !phone || !to) {
          openModal('–û—à–∏–±–∫–∞', '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è: –∏–º—è, —Ç–µ–ª–µ—Ñ–æ–Ω –∏ email.');
          return;
        }
        if (!validateEmail(to)) {
          openModal('–û—à–∏–±–∫–∞', '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email.');
          return;
        }

        const payload = { name, phone, comment, to };

        // Try to send to real server. If network/CORS fails, emulate a random response.
        const endpoint = 'https://webdev-api.loftschool.com/sendmail';
        let usedEmulation = false;
        try {
          const controller = new AbortController();
          const timeout = setTimeout(() => controller.abort(), 8000);
          const resp = await fetch(endpoint, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload),
            signal: controller.signal
          });
          clearTimeout(timeout);

          // If server responds with JSON
          if (resp.ok) {
            const data = await resp.json();
            // server expected to return { status: 'OK' / 'ERROR' , message: '...' }
            if (data && (data.status === 'OK' || data.status === 'success' || data.status === true)) {
              openModal('–£—Å–ø–µ—Ö', data.message || '–í–∞—à –∑–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç. –°–ø–∞—Å–∏–±–æ!');
              form.reset();
              return;
            } else {
              openModal('–û—à–∏–±–∫–∞', data && data.message ? data.message : '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.');
              return;
            }
          } else {
            // Non-200 ‚Äî emulate
            usedEmulation = true;
          }
        } catch (err) {
          // network / CORS / timeout
          usedEmulation = true;
        }

        // –≠–º—É–ª—è—Ü–∏—è (—Å–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª—É—á–∞–π–Ω–æ —É—Å–ø–µ—Ö –∏–ª–∏ –æ—à–∏–±–∫—É)
        if (usedEmulation) {
          const ok = Math.random() > 0.4; // ~60% success
          if (ok) {
            openModal('–£—Å–ø–µ—Ö (—ç–º—É–ª—è—Ü–∏—è)', '–≠–º—É–ª—è—Ü–∏—è: –∑–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω. –°–ø–∞—Å–∏–±–æ!');
            form.reset();
          } else {
            openModal('–û—à–∏–±–∫–∞ (—ç–º—É–ª—è—Ü–∏—è)', '–≠–º—É–ª—è—Ü–∏—è: –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.');
          }
        }
      });
    })();

    /* ====== Sparks canvas (unchanged logic) ====== */
    (function() {
      const canvas = document.getElementById('sparks');
      const ctx = canvas.getContext('2d');
      let particles = [];
      function resize() {
        canvas.width = window.innerWidth;
        canvas.height = 150; // keep small strip at bottom
      }
      window.addEventListener('resize', resize);
      resize();

      class Particle {
        constructor() {
          this.x = Math.random() * canvas.width;
          this.y = canvas.height - Math.random() * 40;
          this.size = Math.random() * 3 + 0.5;
          this.speedY = Math.random() * -0.6 - 0.2;
          this.color = `hsl(${Math.random() * 30 + 20}, 100%, 60%)`;
        }
        update() {
          this.y += this.speedY;
          if (this.y < 10) {
            this.y = canvas.height;
            this.x = Math.random() * canvas.width;
          }
        }
        draw() {
          ctx.beginPath();
          ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
          ctx.fillStyle = this.color;
          ctx.fill();
        }
      }

      function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        if (particles.length < 80) particles.push(new Particle());
        particles.forEach(p => { p.update(); p.draw(); });
        requestAnimationFrame(animate);
      }
      animate();
    })();
  </script>
</body>
</html>
